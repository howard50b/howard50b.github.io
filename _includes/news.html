<!--
<div class="news">
  <h3>news</h3>
  {% if site.news  %}
    <div class="table-responsive">
      <table class="table table-sm table-borderless">
      {% assign news = site.news | reverse %}
      {% for item in news limit: site.news_limit %}
        <tr>
          <th scope="row">{{ item.date | date: "%b %-d, %Y" }}</th>
          <td>
            {% if item.inline %}
              {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
            {% else %}
              <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
      </table>
    </div>
  {% else %}
    <p>No news so far...</p>
  {% endif %}
</div>
-->


<div class="news">
  <h3>news</h3>

  {% if site.news and site.news != empty %}
    {% comment %}
      Filter to only items that explicitly opt in via front matter:
      ---
      show_in_news: true
      ---
    {% endcomment %}
    {% assign news = site.news
      | where: "show_in_news", true
      | sort: "date"
      | reverse %}

    {% assign _limit = site.news_limit | default: 5 %}

    {% if news and news != empty %}
      <div class="table-responsive">
        <table class="table table-sm table-borderless">
          {% for item in news limit: _limit %}
            <tr>
              <th scope="row">{{ item.date | date: "%b %-d, %Y" }}</th>
              <td>
                {% if item.inline %}
                  {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
                {% else %}
                  <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    {% else %}
      <p>No news selected for display.</p>
    {% endif %}
  {% else %}
    <p>No news so far...</p>
  {% endif %}
</div>
