<script>
// Fix HTML entities in math blocks before MathJax processes them
document.addEventListener('DOMContentLoaded', function() {
  // Find all text nodes that might contain math
  const article = document.querySelector('.article') || document.body;
  const walker = document.createTreeWalker(article, NodeFilter.SHOW_TEXT, null, false);
  const textNodes = [];
  while(walker.nextNode()) textNodes.push(walker.currentNode);
  
  textNodes.forEach(node => {
    if (node.nodeValue && node.nodeValue.includes('&')) {
      // Only fix entities inside math delimiters
      node.nodeValue = node.nodeValue
        .replace(/&amp;/g, '&')
        .replace(/&lt;/g, '<')
        .replace(/&gt;/g, '>');
    }
  });
});
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true,
    tags: 'ams'
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">